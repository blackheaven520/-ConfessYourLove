
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‡´æˆ‘å¿ƒçˆ±çš„äºº</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            /* æ›´æµªæ¼«çš„æ¸å˜èƒŒæ™¯ */
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #a18cd1 100%);
            background-size: 200% 200%; /* ä½¿æ¸å˜æ›´å¤§ï¼Œå¯ä»¥åŠ¨ç”» */
            animation: gradient-animation 15s ease infinite; /* èƒŒæ™¯æ¸å˜åŠ¨ç”» */

            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'KaiTi', 'åæ–‡æ¥·ä½“', serif; /* ä½¿ç”¨æ›´æŸ”å’Œçš„å­—ä½“ */
            color: #fff; /* æ–‡å­—é¢œè‰² */
            text-shadow: 2px 2px 6px rgba(0,0,0,0.4); /* æ–‡å­—é˜´å½±æ›´æ˜æ˜¾ */
            position: relative;
            flex-direction: column; /* ä½¿å­å…ƒç´ å‚ç›´æ’åˆ— */
            padding: 10px; /* å¢åŠ ä¸€äº›æ•´ä½“å†…è¾¹è·ï¼Œé˜²æ­¢å†…å®¹è´´è¾¹ */
            box-sizing: border-box; /* å†…è¾¹è·ä¸å¢åŠ å…ƒç´ æ€»å¤§å° */
        }

        /* èƒŒæ™¯æ¸å˜åŠ¨ç”» */
        @keyframes gradient-animation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            text-align: center;
            z-index: 10;
            padding: 20px; /* å¢åŠ å†…è¾¹è· */
            background-color: rgba(255, 255, 255, 0.15); /* åŠé€æ˜èƒŒæ™¯è¡¬æ‰˜æ–‡å­—ï¼Œé€æ˜åº¦è°ƒé«˜ä¸€ç‚¹ */
            border-radius: 15px; /* åœ†è§’æ›´å¤§ */
            backdrop-filter: blur(8px); /* èƒŒæ™¯æ¨¡ç³Šæ•ˆæœæ›´å¼º */
            box-shadow: 0 0 30px rgba(0,0,0,0.3); /* æ·»åŠ é˜´å½±æ•ˆæœæ›´æ˜æ˜¾ */
            margin-bottom: 20px; /* ä¸æŒ‰é’®ä¹‹é—´ç•™ç©º */
            max-width: 90%; /* é™åˆ¶æœ€å¤§å®½åº¦ï¼Œé¿å…åœ¨è¶…å¤§å±å¹•ä¸Šè¿‡å®½ */
            width: auto; /* å®½åº¦è‡ªåŠ¨é€‚åº”å†…å®¹ */
        }

        .message {
            font-size: 2.5em; /* å­—å· */
            font-weight: bold;
            white-space: nowrap;
            overflow: hidden;
            display: inline-block;
            /* å…‰æ ‡å°†åœ¨æ‰“å­—å®Œæˆåé€šè¿‡ JS æ·»åŠ  class æ§åˆ¶ */
            max-width: 100%; /* é˜²æ­¢å•è¡Œæ–‡å­—è¿‡é•¿æº¢å‡ºå®¹å™¨ */
        }

         /* å…‰æ ‡é—ªçƒåŠ¨ç”» (ç”¨äºæ‰“å­—æ•ˆæœçš„ç»“å°¾) */
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: orange; } /* å…‰æ ‡é¢œè‰² */
        }

        /* æ‰“å­—å®Œæˆåæ·»åŠ å…‰æ ‡ */
        .message.typed {
             border-right: .15em solid orange; /* æ¨¡æ‹Ÿå…‰æ ‡ */
             animation: blink-caret .75s step-end infinite; /* å…‰æ ‡é—ªçƒåŠ¨ç”» */
        }


        /* æ¼‚æµ®å…ƒç´ å®¹å™¨ */
        .floating-elements-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
        }

        /* å¿ƒå½¢æ ·å¼ */
        .heart {
            position: absolute;
            background-color: #e53935; /* å¿ƒå½¢é¢œè‰² */
            transform: rotate(-45deg);
            transform-origin: 50% 50%;
            opacity: 0;
             filter: drop-shadow(0 0 5px rgba(229, 57, 53, 0.8)); /* æŸ”å’Œå‘å…‰ */
             animation: float-sway var(--duration, 6s) ease-in infinite; /* æ¼‚æµ®å¸¦æ‘‡æ‘†åŠ¨ç”»ï¼Œæ—¶é•¿å¯å˜ */
        }

        .heart::before,
        .heart::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: #e53935;
            border-radius: 50%;
        }

        .heart::before {
            top: -50%;
            left: 0;
        }

        .heart::after {
            left: 50%;
            top: 0;
        }

         /* èŠ±ç“£æ ·å¼ */
         .petal {
            position: absolute;
            width: 15px;
            height: 8px; /* èŠ±ç“£å½¢çŠ¶ */
            background-color: #ff6699; /* èŠ±ç“£é¢œè‰² */
            border-radius: 50%; /* æ¤­åœ† */
            opacity: 0;
             filter: drop-shadow(0 0 3px rgba(255, 102, 153, 0.6)); /* æŸ”å’Œå‘å…‰ */
             animation: fall-rotate var(--duration, 8s) ease-in infinite; /* ä¸‹è½å¸¦æ—‹è½¬åŠ¨ç”»ï¼Œæ—¶é•¿å¯å˜ */
         }


        /* æ¼‚æµ®å¸¦æ‘‡æ‘†åŠ¨ç”» */
        @keyframes float-sway {
            0% {
                transform: translateY(0) translateX(0) rotate(-45deg);
                opacity: 0; /* ä»åº•éƒ¨é€æ˜å‡ºç° */
            }
            20% {
                 opacity: 1; /* å¿«é€Ÿæ˜¾ç° */
            }
            50% {
                transform: translateY(-50vh) translateX(20px) rotate(-45deg); /* å‘ä¸Šæ¼‚æµ®å¹¶å‘å³ */
                opacity: 0.8;
            }
             80% {
                transform: translateY(-80vh) translateX(-20px) rotate(-45deg); /* ç»§ç»­å‘ä¸Šå¹¶å‘å·¦ */
                opacity: 0.4;
            }
            100% {
                transform: translateY(-100vh) translateX(0) rotate(-45deg); /* æ¼‚å‡ºå±å¹•é¡¶éƒ¨ */
                opacity: 0; /* é€æ¸æ¶ˆå¤± */
            }
        }

         /* ä¸‹è½å¸¦æ—‹è½¬åŠ¨ç”» */
         @keyframes fall-rotate {
            0% {
                transform: translateY(-10vh) rotate(0deg); /* ä»é¡¶éƒ¨ä¸Šæ–¹å¼€å§‹ */
                opacity: 0;
            }
             10% {
                 opacity: 1; /* å¿«é€Ÿæ˜¾ç° */
             }
             100% {
                 transform: translateY(100vh) rotate(720deg); /* æ—‹è½¬å¹¶ä¸‹è½å‡ºå±å¹• */
                 opacity: 0; /* é€æ¸æ¶ˆå¤± */
             }
         }

        /* éŸ³ä¹æ§åˆ¶æŒ‰é’®æ ·å¼ */
        #music-control {
            position: fixed; /* å›ºå®šä½ç½® */
            bottom: 20px;
            right: 20px;
            z-index: 100; /* ç¡®ä¿åœ¨æœ€ä¸Šå±‚ */
            background-color: rgba(255, 255, 255, 0.4); /* åŠé€æ˜èƒŒæ™¯ */
            color: #333; /* é¢œè‰² */
            border: none;
            border-radius: 5px;
            padding: 10px;
            cursor: pointer;
            font-size: 1.2em;
            line-height: 1em;
            backdrop-filter: blur(3px); /* æ¨¡ç³Šæ•ˆæœ */
            transition: background-color 0.3s ease;
            display: flex; /* ä½¿ç”¨ flexbox å±…ä¸­æ–‡æœ¬/å›¾æ ‡ */
            align-items: center;
            justify-content: center;
            width: 40px; /* å›ºå®šå®½åº¦å’Œé«˜åº¦ï¼Œä½¿å…¶æˆä¸ºæ–¹å½¢ */
            height: 40px;
            /* é’ˆå¯¹ç§»åŠ¨ç«¯ä¼˜åŒ–ç‚¹å‡»åŒºåŸŸ */
            min-width: 44px;
            min-height: 44px;
            box-sizing: border-box;
        }

        #music-control:hover {
            background-color: rgba(255, 255, 255, 0.6);
        }

        /* æˆ‘æ„¿æ„æŒ‰é’®æ ·å¼ */
        #yes-button {
            z-index: 10; /* ç¡®ä¿åœ¨æ–‡å­—å’ŒèƒŒæ™¯ä¸Šé¢ */
            padding: 15px 30px;
            font-size: 1.5em;
            font-family: 'KaiTi', 'åæ–‡æ¥·ä½“', serif;
            font-weight: bold;
            color: #fff;
            background: linear-gradient(45deg, #ff6a6a, #ff5252); /* æ¼‚äº®çš„æ¸å˜èƒŒæ™¯ */
            border: none;
            border-radius: 50px; /* å¤§åœ†è§’ */
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(255, 82, 82, 0.4); /* é˜´å½± */
            transition: all 0.3s ease; /* å¹³æ»‘è¿‡æ¸¡ */
            display: none; /* åˆå§‹éšè— */
            margin-top: 20px; /* ä¸æ–‡å­—å®¹å™¨ç•™ç©º */
             /* é’ˆå¯¹ç§»åŠ¨ç«¯ä¼˜åŒ–ç‚¹å‡»åŒºåŸŸ */
            min-width: 150px; /* æœ€å°å®½åº¦ */
            min-height: 44px; /* æœ€å°é«˜åº¦ */
            box-sizing: border-box;
        }

        #yes-button:hover {
            background: linear-gradient(45deg, #ff5252, #ff6a6a); /* æ‚¬åœæ—¶æ¸å˜åè½¬ */
            box-shadow: 0 8px 20px rgba(255, 82, 82, 0.6);
            transform: translateY(-3px); /* å‘ä¸Šå¾®ç§» */
        }

         #yes-button:active {
             transform: translateY(0); /* ç‚¹å‡»æ—¶å›åˆ°åŸä½ */
             box-shadow: 0 3px 10px rgba(255, 82, 82, 0.4);
         }

        /* ========== ç§»åŠ¨ç«¯ä¼˜åŒ– Media Query ========== */
        @media (max-width: 600px) { /* å½“å±å¹•å®½åº¦å°äºæˆ–ç­‰äº 600px æ—¶åº”ç”¨ */
            .container {
                padding: 15px; /* å‡å°å†…è¾¹è· */
                border-radius: 10px; /* å‡å°åœ†è§’ */
                max-width: 95%; /* åœ¨å°å±å¹•ä¸Šå¯ä»¥ä½¿ç”¨æ›´å¤šå®½åº¦ */
            }

            .message {
                font-size: 1.8em; /* å‡å°å­—ä½“å¤§å° */
                white-space: normal; /* å…è®¸æ–‡å­—æ¢è¡Œï¼Œé¿å…åœ¨çª„å±å¹•ä¸Šæº¢å‡º */
                overflow: visible; /* å…è®¸æ¢è¡Œåæ˜¾ç¤ºå…¨éƒ¨å†…å®¹ */
                text-align: center; /* æ¢è¡Œåæ–‡å­—å±…ä¸­ */
                max-width: 100%; /* ç¡®ä¿ä¸è¶…è¿‡çˆ¶å®¹å™¨ */
            }

             /* è°ƒæ•´å…‰æ ‡æ ·å¼ï¼Œè®©å®ƒåœ¨æ¢è¡Œåä¹Ÿèƒ½æ­£å¸¸å·¥ä½œ */
            .message.typed {
                 /* ç§»é™¤è¾¹æ¡†å…‰æ ‡ï¼Œæˆ–è€…è°ƒæ•´æ ·å¼ */
                 border-right: none; /* æ¢è¡Œåï¼Œæ–‡å­—æœ«å°¾çš„è¾¹æ¡†å…‰æ ‡æ•ˆæœä¸ä½³ï¼Œç›´æ¥ç§»é™¤ */
                 /* å¦‚æœéœ€è¦å…‰æ ‡ï¼Œå¯ä»¥è€ƒè™‘å…¶ä»–æ–¹å¼ï¼Œæ¯”å¦‚åœ¨æœ€åä¸€ä¸ªå­—ç¬¦åé¢æ·»åŠ ä¸€ä¸ªä¼ªå…ƒç´  */
            }

            /* å¦‚æœå¸Œæœ›ç»§ç»­æœ‰å…‰æ ‡é—ªçƒï¼Œå¯ä»¥åœ¨æœ€åä¸€ä¸ª <br> æˆ–æ–‡å­—åæ·»åŠ ä¸€ä¸ªæ¨¡æ‹Ÿå…‰æ ‡çš„å…ƒç´  */
             /* å¯ä»¥åœ¨ JS æ‰“å­—å®Œæˆåï¼Œåœ¨ messageElement.innerHTML çš„æœ«å°¾æ·»åŠ  <span class="cursor">_</span> */
             /* ç„¶åç»™ .cursor æ·»åŠ  blink-caret åŠ¨ç”» */
             /* ä¸ºäº†ç®€å•èµ·è§ï¼Œè¿™é‡Œç›´æ¥åœ¨å°å±å¹•ä¸‹ç§»é™¤å…‰æ ‡åŠ¨ç”» */


            #yes-button {
                padding: 12px 25px; /* å‡å°æŒ‰é’®å†…è¾¹è· */
                font-size: 1.2em; /* å‡å°æŒ‰é’®å­—ä½“å¤§å° */
                min-width: 120px; /* å‡å°æœ€å°å®½åº¦ */
            }

            #music-control {
                bottom: 10px;
                right: 10px;
                 min-width: 40px; /* æœ€å°ç‚¹å‡»åŒºåŸŸä¿æŒæ ‡å‡†å¤§å° */
                 min-height: 40px;
                 width: 40px;
                 height: 40px;
                 padding: 5px; /* å‡å°å†…è¾¹è· */
                 font-size: 1em; /* å‡å°å›¾æ ‡å¤§å° */
            }

            /* å¯é€‰ï¼šè°ƒæ•´æ¼‚æµ®å…ƒç´ çš„ç”Ÿæˆé¢‘ç‡æˆ–å¤§å°ï¼Œé˜²æ­¢å°å±å¹•å…ƒç´ è¿‡äºå¯†é›† */
            /* è¿™éœ€è¦åœ¨ JS ä¸­åˆ¤æ–­å±å¹•å°ºå¯¸æ¥è°ƒæ•´ setInterval çš„é—´éš” */
        }

    </style>
</head>
<body>

    <!-- èƒŒæ™¯éŸ³ä¹å…ƒç´  -->
    <!-- æ³¨æ„: ä½ éœ€è¦å°† src="romantic_music.mp3" æ›¿æ¢ä¸ºä½ çš„éŸ³ä¹æ–‡ä»¶è·¯å¾„ -->
    <!-- muted å±æ€§æ˜¯ä¸ºäº†å…¼å®¹æµè§ˆå™¨è‡ªåŠ¨æ’­æ”¾ç­–ç•¥ï¼ŒéŸ³ä¹ä¼šå…ˆé™éŸ³æ’­æ”¾ -->
    <audio id="bg-music" src="romantic_music.mp3" loop muted></audio>

    <div class="container">
        <div class="message" id="typing-message"></div>
    </div>

    <!-- æˆ‘æ„¿æ„æŒ‰é’® -->
    <button id="yes-button">æˆ‘æ„¿æ„ï¼</button>

    <div class="floating-elements-container">
        <!-- æ¼‚æµ®å…ƒç´ ä¼šç”± JavaScript æ·»åŠ åˆ°è¿™é‡Œ -->
    </div>

    <!-- éŸ³ä¹æ§åˆ¶æŒ‰é’® -->
    <button id="music-control">ğŸ”‡</button> <!-- åˆå§‹æ˜¾ç¤ºé™éŸ³å›¾æ ‡ -->

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const messageElement = document.getElementById('typing-message');
            const audio = document.getElementById('bg-music');
            const musicControl = document.getElementById('music-control');
            const yesButton = document.getElementById('yes-button'); // è·å–æŒ‰é’®å…ƒç´ 

            // ä½ æƒ³è¡¨ç™½çš„è¯ï¼Œå¯ä»¥å†™åœ¨è¿™é‡Œ
            const messages = [
                "å¦‚æœä¸–ç•Œåªæœ‰ä¸‰å¤©,",
                "æˆ‘æ„¿æŠŠç¬¬ä¸€å¤©ç”¨æ¥è®¤è¯†ä½ ,",
                "ç¬¬äºŒå¤©ç”¨æ¥å–œæ¬¢ä½ ,",
                "ç¬¬ä¸‰å¤©ç”¨æ¥å›å¿†ä½ .",
                "å¦‚æœä¸–ç•Œæœ‰ä¸‰å¤©ä»¥ä¸Š,",
                "æˆ‘æ„¿æŠŠæ‰€æœ‰æ—¶é—´éƒ½ç”¨æ¥...",
                "å¥½å¥½çˆ±ä½ .",
                "ä½ æ„¿æ„ï¼Œå’Œæˆ‘ä¸€èµ·å—ï¼Ÿ â¤ï¸"
            ];

            // å›åº”çš„æ–‡å­—
            const responseMessage = "å¤ªå¥½äº†ï¼æˆ‘çŸ¥é“ä½ ä¹Ÿæ˜¯ï¼è®©æˆ‘ä»¬æ°¸è¿œåœ¨ä¸€èµ·å§ï¼ğŸ’–âœ¨";

            let currentMessageIndex = 0;
            let charIndex = 0;
            const typingSpeed = 100; // è°ƒæ•´æ‰“å­—é€Ÿåº¦ï¼ˆæ¯«ç§’ï¼‰
            const lineBreakDelay = 800; // æ¯è¡Œä¹‹é—´çš„æš‚åœæ—¶é—´

            function typeWriter() {
                if (currentMessageIndex < messages.length) {
                    const currentMessage = messages[currentMessageIndex];
                    if (charIndex < currentMessage.length) {
                         // åœ¨æ·»åŠ å­—ç¬¦å‰ï¼Œç§»é™¤å¯èƒ½çš„ CSS è¾¹æ¡†å…‰æ ‡ï¼Œé¿å…åœ¨æ¢è¡Œæ—¶å‡ºç°é—®é¢˜
                         // æ³¨æ„ï¼šå¦‚æœä½¿ç”¨äº† JS æ¨¡æ‹Ÿå…‰æ ‡å…ƒç´ ï¼Œè¿™é‡Œéœ€è¦å¤„ç†é‚£ä¸ªå…ƒç´ 
                        // messageElement.style.borderRight = 'transparent'; // å·²ç»åœ¨CSS media query é‡Œç§»é™¤äº†ï¼Œè¿™é‡Œå¯ä»¥ä¸å¤„ç†
                        messageElement.innerHTML += currentMessage.charAt(charIndex);
                        charIndex++;
                        setTimeout(typeWriter, typingSpeed);
                    } else {
                        // ä¸€è¡Œæ‰“å­—å®Œæ¯•
                        if (currentMessageIndex < messages.length - 1) {
                            // æ·»åŠ æ¢è¡Œï¼Œå¹¶å‡†å¤‡ä¸‹ä¸€è¡Œ
                            messageElement.innerHTML += '<br>'; // æ·»åŠ æ¢è¡Œç¬¦
                            currentMessageIndex++;
                            charIndex = 0;
                            // æš‚åœä¸€æ®µæ—¶é—´åå¼€å§‹ä¸‹ä¸€è¡Œ
                            setTimeout(typeWriter, lineBreakDelay);
                        } else {
                            // æ‰€æœ‰è¡Œéƒ½æ‰“å­—å®Œæ¯•
                            messageElement.classList.add('typed'); // æ·»åŠ  class è§¦å‘å…‰æ ‡é—ªçƒ (åœ¨å¤§å±å¹•ä¸Š)

                            // æ‰“å­—å®Œæˆåæ˜¾ç¤ºæŒ‰é’®
                            yesButton.style.display = 'block';

                            // æ‰“å­—å®Œæˆåå¼€å§‹æ¼‚æµ®å…ƒç´ åŠ¨ç”»
                            startFloatingAnimations();
                        }
                    }
                }
            }

            // å¼€å§‹æ‰“å­—åŠ¨ç”»
            typeWriter();


            // æ¼‚æµ®å…ƒç´ åŠ¨ç”»éƒ¨åˆ†
            const floatingElementsContainer = document.querySelector('.floating-elements-container');

             let heartInterval;
             let petalInterval;


            function createHeart() {
                const heart = document.createElement('div');
                heart.classList.add('heart');

                const size = Math.random() * 20 + 15; // 15px åˆ° 35px
                heart.style.width = size + 'px';
                heart.style.height = size + 'px';

                // éšæœºèµ·å§‹ä½ç½® (å±å¹•åº•éƒ¨é™„è¿‘ï¼Œæ°´å¹³ä½ç½®éšæœº)
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.bottom = '-50px'; // ä»å±å¹•ä¸‹æ–¹å¼€å§‹
                heart.style.top = 'unset'; // ç¡®ä¿bottomç”Ÿæ•ˆ

                // éšæœºåŠ¨ç”»å»¶è¿Ÿå’ŒæŒç»­æ—¶é—´
                heart.style.animationDelay = Math.random() * 3 + 's';
                // ä½¿ç”¨CSSå˜é‡è®¾ç½®åŠ¨ç”»æ—¶é•¿
                heart.style.setProperty('--duration', (Math.random() * 5 + 5) + 's'); // 5s åˆ° 10s

                floatingElementsContainer.appendChild(heart);

                // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
                heart.addEventListener('animationend', () => {
                    heart.remove();
                });
            }

             function createPetal() {
                const petal = document.createElement('div');
                petal.classList.add('petal');

                const size = Math.random() * 10 + 10; // 10px åˆ° 20px (å®½åº¦)
                 const height = size * (Math.random() * 0.4 + 0.4); // é«˜åº¦æ˜¯å®½åº¦çš„ä¸€éƒ¨åˆ†ï¼Œæ›´åƒæ¤­åœ†
                petal.style.width = size + 'px';
                petal.style.height = height + 'px';


                // éšæœºèµ·å§‹ä½ç½® (å±å¹•é¡¶éƒ¨é™„è¿‘ï¼Œæ°´å¹³ä½ç½®éšæœº)
                 petal.style.left = Math.random() * 100 + 'vw';
                 petal.style.top = '-30px'; // ä»å±å¹•ä¸Šæ–¹å¼€å§‹
                 petal.style.bottom = 'unset'; // ç¡®ä¿topç”Ÿæ•ˆ


                // éšæœºåŠ¨ç”»å»¶è¿Ÿå’ŒæŒç»­æ—¶é—´
                 petal.style.animationDelay = Math.random() * 4 + 's';
                 // ä½¿ç”¨CSSå˜é‡è®¾ç½®åŠ¨ç”»æ—¶é•¿
                 petal.style.setProperty('--duration', (Math.random() * 6 + 6) + 's'); // 6s åˆ° 12s

                floatingElementsContainer.appendChild(petal);

                // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
                petal.addEventListener('animationend', () => {
                    petal.remove();
                });
            }


            function startFloatingAnimations(heartRate = 300, petalRate = 200) {
                // åœæ­¢æ—§çš„ç”Ÿæˆå™¨ï¼Œå¦‚æœå­˜åœ¨çš„è¯
                 if (heartInterval) clearInterval(heartInterval);
                 if (petalInterval) clearInterval(petalInterval);

                // æ¯éš”ä¸€æ®µæ—¶é—´ç”Ÿæˆä¸€ä¸ªå¿ƒå½¢
                heartInterval = setInterval(createHeart, heartRate);

                 // æ¯éš”ä¸€æ®µæ—¶é—´ç”Ÿæˆä¸€ä¸ªèŠ±ç“£
                 petalInterval = setInterval(createPetal, petalRate);
            }


            // ============== éŸ³ä¹æ§åˆ¶éƒ¨åˆ† ==============

            // å°è¯•æ’­æ”¾éŸ³ä¹ï¼ˆé™éŸ³ï¼‰ã€‚ç”±äº muted å±æ€§ï¼Œè¿™é‡Œé€šå¸¸ä¼šè¢«å…è®¸æ’­æ”¾ã€‚
            // promise æ–¹å¼å¤„ç†å¼‚æ­¥æ’­æ”¾ï¼Œæ›´å¥å£®
            audio.play().catch(error => {
                console.log("è‡ªåŠ¨é™éŸ³æ’­æ”¾å¤±è´¥:", error);
                // å¦‚æœé™éŸ³æ’­æ”¾å¤±è´¥ï¼ŒéŸ³ä¹æ§åˆ¶æŒ‰é’®å¯èƒ½éœ€è¦å¤„ç†éæ’­æ”¾çŠ¶æ€
                // ä½†é€šå¸¸ muted å±æ€§é…åˆ play() æ˜¯æˆåŠŸçš„ã€‚
            });


            // éŸ³ä¹æ§åˆ¶æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            musicControl.addEventListener('click', () => {
                if (audio.muted) {
                    audio.muted = false; // å–æ¶ˆé™éŸ³
                    musicControl.textContent = 'ğŸ”Š'; // æ˜¾ç¤ºéŸ³é‡å¼€å¯å›¾æ ‡
                     // å¦‚æœä¹‹å‰æ²¡æœ‰æ’­æ”¾ï¼Œå–æ¶ˆé™éŸ³åå°è¯•æ’­æ”¾
                     audio.play().catch(error => {
                         console.log("å–æ¶ˆé™éŸ³åæ’­æ”¾å¤±è´¥:", error);
                         // å¯ä»¥åœ¨è¿™é‡Œç»™ç”¨æˆ·æç¤ºï¼Œæˆ–è€…ä¿æŒé™éŸ³å›¾æ ‡
                         audio.muted = true; // æ’­æ”¾å¤±è´¥åˆ™é‡æ–°é™éŸ³
                         musicControl.textContent = 'ğŸ”‡';
                     });
                } else {
                    audio.muted = true; // é™éŸ³
                    musicControl.textContent = 'ğŸ”‡'; // æ˜¾ç¤ºé™éŸ³å›¾æ ‡
                }
            });

            // å¯é€‰ï¼šç›‘å¬éŸ³é¢‘æ’­æ”¾å’Œæš‚åœäº‹ä»¶ï¼Œæ›´æ–°æŒ‰é’®çŠ¶æ€
             audio.addEventListener('play', () => {
                 if (!audio.muted) {
                    musicControl.textContent = 'ğŸ”Š';
                 }
             });
             audio.addEventListener('pause', () => {
                 if (!audio.muted) { // å¦‚æœä¸æ˜¯å› ä¸ºé™éŸ³è€Œæš‚åœï¼Œå¯èƒ½æ˜¯å…¶ä»–åŸå› 
                     // å¯ä»¥æ˜¾ç¤ºä¸€ä¸ªæš‚åœå›¾æ ‡ï¼Œå¦‚æœéœ€è¦çš„è¯
                 }
             });
             audio.addEventListener('volumechange', () => {
                // å½“éŸ³é‡æˆ–é™éŸ³çŠ¶æ€æ”¹å˜æ—¶è§¦å‘
                if (audio.muted) {
                    musicControl.textContent = 'ğŸ”‡';
                } else {
                     // ä¹Ÿå¯ä»¥æ£€æŸ¥ audio.volume æ˜¯å¦å¤§äº 0
                     musicControl.textContent = 'ğŸ”Š';
                }
            });


            // ============== éŸ³ä¹æ§åˆ¶éƒ¨åˆ†ç»“æŸ ==============

            // ============== æˆ‘æ„¿æ„æŒ‰é’®ç‚¹å‡»äº‹ä»¶ ==============

            yesButton.addEventListener('click', () => {
                // 1. éšè—æŒ‰é’®
                yesButton.style.display = 'none';

                // 2. æ¸…é™¤åŸæœ‰çš„æ‰“å­—å…‰æ ‡åŠ¨ç”»
                messageElement.classList.remove('typed');
                // messageElement.style.borderRight = 'transparent'; // å·²åœ¨CSSä¸­å¤„ç†æˆ–ä¸å†éœ€è¦

                // 3. æ˜¾ç¤ºå›åº”æ–‡å­—
                messageElement.style.opacity = 0; // å…ˆéšè—
                messageElement.style.transition = 'opacity 1s ease-in-out'; // æ·»åŠ è¿‡æ¸¡æ•ˆæœ
                messageElement.style.whiteSpace = 'normal'; // å…è®¸å›åº”æ–‡å­—æ¢è¡Œ
                messageElement.style.overflow = 'visible'; // ç¡®ä¿æ¢è¡Œåå…¨éƒ¨å¯è§
                 messageElement.style.borderRight = 'none'; // ç¡®ä¿æ²¡æœ‰å…‰æ ‡è¾¹æ¡†

                setTimeout(() => {
                    messageElement.innerHTML = responseMessage; // æ›¿æ¢æ–‡æœ¬
                    messageElement.style.opacity = 1; // é€æ¸æ˜¾ç¤º
                    // ç¡®ä¿åœ¨æ‰‹æœºä¸Šæ–‡å­—æ¢è¡Œåä¹Ÿèƒ½å±…ä¸­
                    messageElement.style.textAlign = 'center';

                }, 1000); // 1ç§’åæ›¿æ¢å¹¶æ˜¾ç¤ºæ–‡æœ¬

                // 4. å¢å¼ºæ¼‚æµ®å…ƒç´ åŠ¨ç”» (å¯é€‰)
                 const burstDuration = 5000; // å¢å¼ºæŒç»­æ—¶é—´ 5ç§’
                 startFloatingAnimations(100, 100); // å¢å¼ºç”Ÿæˆé€Ÿåº¦

                 setTimeout(() => {
                     // åœæ­¢å¢å¼ºï¼Œå¹¶æ¸…é™¤æ—§çš„interval
                     clearInterval(heartInterval);
                     clearInterval(petalInterval);
                     // å¯é€‰ï¼šå†æ¬¡å¯åŠ¨æ­£å¸¸é€Ÿåº¦ï¼Œå¦‚æœå¸Œæœ›åŠ¨ç”»æŒç»­çš„è¯
                     // startFloatingAnimations(300, 200);
                     // æˆ–è€…ï¼šä¸åšä»»ä½•äº‹ï¼Œè®©å·²æœ‰çš„å…ƒç´ ç»§ç»­åŠ¨ç”»ç›´åˆ°æ¶ˆå¤±
                 }, burstDuration);


            });

            // ============== æˆ‘æ„¿æ„æŒ‰é’®ç‚¹å‡»äº‹ä»¶ç»“æŸ ==============


            // å¯é€‰ï¼šåœ¨é¡µé¢å¸è½½æ—¶æ¸…é™¤ intervalï¼Œé¿å…æ½œåœ¨é—®é¢˜ï¼ˆè™½ç„¶å•é¡µé¢é€šå¸¸ä¸éœ€è¦ï¼‰
            // window.addEventListener('beforeunload', () => {
            //     clearInterval(heartInterval);
            //     clearInterval(petalInterval);
            //     audio.pause(); // æš‚åœéŸ³ä¹
            // });

        });
    </script>
</body>
</html>
